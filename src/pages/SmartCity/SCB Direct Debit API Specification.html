<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>SCB Direct Debit API - Technical Specification</title>
    <!-- Highlight.js CSS -->
    <link
      rel="stylesheet"
      href="<code>HTTPS</code>://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
    />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',
          'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',
          'Helvetica Neue', sans-serif;
        line-height: 1.6;
        color: #333333;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background-color: #ffffff;
      }

      h1 {
        color: #2c3e50;
        border-bottom: 3px solid #3498db;
        padding-bottom: 10px;
        font-size: 2.5em;
        margin-bottom: 30px;
        text-align: center;
      }

      h2 {
        color: #34495e;
        border-bottom: 2px solid #ecf0f1;
        padding-bottom: 8px;
        margin-top: 40px;
        margin-bottom: 20px;
        font-size: 1.8em;
      }

      h3 {
        color: #2c3e50;
        margin-top: 30px;
        margin-bottom: 15px;
        font-size: 1.4em;
        font-weight: 600;
      }

      h4 {
        color: #34495e;
        margin-top: 25px;
        margin-bottom: 12px;
        font-size: 1.2em;
        font-weight: 600;
      }

      p {
        margin-bottom: 16px;
        text-align: justify;
      }

      ul,
      ol {
        margin-bottom: 16px;
        padding-left: 30px;
      }

      li {
        margin-bottom: 8px;
      }

      code {
        background-color: #f8f9fa;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 0.9em;
        color: #e74c3c;
        border: 1px solid #e1e8ed;
      }

      pre {
        background-color: #f8f9fa;
        border: 1px solid #e1e8ed;
        border-radius: 6px;
        padding: 16px;
        overflow-x: auto;
        margin: 20px 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      pre code {
        background: none;
        padding: 0;
        border: none;
        color: inherit;
        font-size: 0.85em;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background-color: #ffffff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-radius: 6px;
        overflow: hidden;
      }

      table thead {
        background-color: #34495e;
        color: #ffffff;
      }

      table th {
        padding: 12px 15px;
        text-align: left;
        font-weight: 600;
        border-bottom: 2px solid #2c3e50;
      }

      table td {
        padding: 12px 15px;
        border-bottom: 1px solid #ecf0f1;
      }

      table tbody tr:nth-child(even) {
        background-color: #f8f9fa;
      }

      table tbody tr:hover {
        background-color: #e8f4fd;
        transition: background-color 0.3s ease;
      }

      .table-striped tbody tr:nth-child(odd) {
        background-color: #ffffff;
      }

      .table-striped tbody tr:nth-child(even) {
        background-color: #f8f9fa;
      }

      .table-bordered {
        border: 1px solid #dee2e6;
      }

      .table-bordered th,
      .table-bordered td {
        border: 1px solid #dee2e6;
      }

      blockquote {
        border-left: 4px solid #3498db;
        margin: 20px 0;
        padding: 10px 20px;
        background-color: #f8f9fa;
        font-style: italic;
        color: #555555;
      }

      .alert {
        padding: 15px;
        margin-bottom: 20px;
        border: 1px solid transparent;
        border-radius: 4px;
      }

      .alert-info {
        color: #31708f;
        background-color: #d9edf7;
        border-color: #bce8f1;
      }

      .alert-warning {
        color: #8a6d3b;
        background-color: #fcf8e3;
        border-color: #faebcc;
      }

      .alert-danger {
        color: #a94442;
        background-color: #f2dede;
        border-color: #ebccd1;
      }

      hr {
        border: none;
        height: 2px;
        background: linear-gradient(to right, #3498db, #2ecc71, #3498db);
        margin: 40px 0;
        border-radius: 2px;
      }

      .toc {
        background-color: #f8f9fa;
        border: 1px solid #e1e8ed;
        border-radius: 6px;
        padding: 20px;
        margin: 30px 0;
      }

      .toc h3 {
        margin-top: 0;
        color: #2c3e50;
        border-bottom: 1px solid #bdc3c7;
        padding-bottom: 10px;
      }

      .toc ul {
        list-style-type: none;
        padding-left: 0;
      }

      .toc ul li {
        margin: 8px 0;
      }

      .toc ul li a {
        color: #3498db;
        text-decoration: none;
        font-weight: 500;
      }

      .toc ul li a:hover {
        color: #2980b9;
        text-decoration: underline;
      }

      .code-header {
        background-color: #34495e;
        color: #ffffff;
        padding: 8px 16px;
        font-size: 0.9em;
        font-weight: 600;
        border-radius: 6px 6px 0 0;
        margin-bottom: 0;
      }

      .code-header + pre {
        margin-top: 0;
        border-radius: 0 0 6px 6px;
        border-top: none;
      }

      strong {
        color: #2c3e50;
        font-weight: 600;
      }

      .highlight {
        background-color: #fff3cd;
        padding: 2px 4px;
        border-radius: 3px;
        border: 1px solid #ffeaa7;
      }

      .status-code {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 0.9em;
        font-weight: 600;
      }

      .status-success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .status-error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .status-warning {
        background-color: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
      }

      .method-get {
        background-color: #61affe;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8em;
        font-weight: bold;
        margin-right: 10px;
      }

      .method-post {
        background-color: #49cc90;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8em;
        font-weight: bold;
        margin-right: 10px;
      }

      .method-put {
        background-color: #fca130;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8em;
        font-weight: bold;
        margin-right: 10px;
      }

      .method-delete {
        background-color: #f93e3e;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8em;
        font-weight: bold;
        margin-right: 10px;
      }

      .endpoint {
        background-color: #f8f9fa;
        border: 1px solid #e1e8ed;
        border-radius: 4px;
        padding: 10px;
        margin: 10px 0;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      }

      .response-example {
        background-color: #f1f8ff;
        border-left: 4px solid #0366d6;
        padding: 15px;
        margin: 15px 0;
        border-radius: 0 4px 4px 0;
      }

      .response-example h5 {
        margin-top: 0;
        color: #0366d6;
        font-weight: 600;
      }

      .parameter-table {
        font-size: 0.9em;
      }

      .parameter-table th {
        background-color: #f1f3f4;
        color: #202124;
        font-weight: 600;
      }

      .parameter-required {
        color: #d73a49;
        font-weight: 600;
      }

      .parameter-optional {
        color: #28a745;
        font-weight: 600;
      }

      @media (max-width: 768px) {
        body {
          padding: 10px;
        }

        h1 {
          font-size: 2em;
        }

        h2 {
          font-size: 1.5em;
        }

        table {
          font-size: 0.8em;
        }

        pre {
          padding: 10px;
          font-size: 0.8em;
        }
      }

      .copy-button {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: #6c757d;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8em;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .code-block-container {
        position: relative;
      }

      .code-block-container:hover .copy-button {
        opacity: 1;
      }

      .copy-button:hover {
        background-color: #5a6268;
      }

      .section-nav {
        background-color: #f8f9fa;
        border-radius: 6px;
        padding: 15px;
        margin: 20px 0;
        border-left: 4px solid #007bff;
      }

      .section-nav h4 {
        margin-top: 0;
        color: #007bff;
      }

      .section-nav ul {
        margin-bottom: 0;
        columns: 2;
        column-gap: 30px;
      }

      .section-nav li {
        break-inside: avoid;
        margin-bottom: 5px;
      }

      .section-nav a {
        color: #007bff;
        text-decoration: none;
      }

      .section-nav a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body id="preview">
    <h1 class="code-line" data-line-start="0" data-line-end="1">
      <a
        id="Financial_Team_SCB_Direct_Debit_Wrapper_API_Specification_Smart_City_DB_0"
      ></a
      >Financial Team: SCB Direct Debit API Specification (Smart City)
    </h1>
    <h2 class="code-line" data-line-start="1" data-line-end="2">
      <a id="1_How_This_Works_1"></a>1. How This Works
    </h2>
    <p class="has-line-data" data-line-start="3" data-line-end="4">
      SCB Direct Debit allows customers to pay using their bank account
      directly. Here's how the process works:
    </p>
    <p class="has-line-data" data-line-start="5" data-line-end="6">
      The process begins by checking if the customer's debit card is registered
      using <code>/ourApi/v1/registration/status</code>. If the card is not
      registered, redirect the customer via
      <code>/ourApi/v1/registration/init</code> to the bank's website to
      complete registration. After returning to the application via
      <code>backUrl</code>, poll
      <code>/ourApi/v1/registration/status/{regRef}</code> until
      <code>isRegistered</code> is true. Payment processing occurs only when
      <code>/ourApi/v1/payment/debit</code> is explicitly called.
    </p>

    <h3 class="code-line" data-line-start="7" data-line-en d="8">
      <a id="Simple_Steps_for_Other_Teams_7"></a>Simple Steps to use Direct
      Debit for Other Teams
    </h3>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Step</th>
          <th style="text-align: left">Action</th>
          <th style="text-align: left">Input Required</th>
          <th style="text-align: left">What It Does</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left"><strong>1</strong></td>
          <td style="text-align: left">Check if user's debit card works</td>
          <td style="text-align: left">
            Payer and receiver's <code>userId</code>
          </td>
          <td style="text-align: left">
            This is called registration - verifies the customer's bank account.
            If not registered, you'll get <code>regRef</code> and link for user
            registration.
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><strong>1b</strong></td>
          <td style="text-align: left">Wait for registration completion</td>
          <td style="text-align: left">
            <code>regRef</code> from Step 1 and <code>backUrl</code>
          </td>
          <td style="text-align: left">
            Poll <code>/status/{regRef}</code> every 5-10 seconds until
            <code>isRegistered</code> becomes true. User will be at
            <code>backUrl</code> during polling.
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><strong>2</strong></td>
          <td style="text-align: left">Process payment (ddpay)</td>
          <td style="text-align: left">
            <code>regRef</code> from Step 1, <code>amount</code>,
            <code>currency</code> type
          </td>
          <td style="text-align: left">
            Processes the payment when called. Returns success or failure.
            Registration alone does not trigger payment.
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><strong>3</strong></td>
          <td style="text-align: left">
            Check payment status (future reference)
          </td>
          <td style="text-align: left">
            <code>refNumber</code> from Step 2's return
          </td>
          <td style="text-align: left">
            Allows you to check the payment information anytime after payment is
            completed
          </td>
        </tr>
      </tbody>
    </table>
    <hr />
    <h2 class="code-line" data-line-start="2" data-line-end="3">
      <a id="2_Purpose_2"></a>2. Purpose
    </h2>
    <p class="has-line-data" data-line-start="4" data-line-end="5">
      This document outlines the specific API endpoints that the Financial Team
      provides to other development teams. The solution maintains strict
      security by following a
      <strong><code>non-storage policy</code></strong> for sensitive customer
      banking information while supporting the complete SCB Direct Debit
      process:
      <strong>Customer Registration Status Verification and Setup</strong> plus
      <strong>Direct Debit Payments</strong>.
    </p>
    <hr />
    <h2 class="code-line" data-line-start="8" data-line-end="9">
      <a id="3_Financial_Team_Database_Structure_8"></a>3. Financial Team
      Database Structure for SCB Direct Debit
    </h2>
    <p class="has-line-data" data-line-start="10" data-line-end="11">
      The Financial Team tracks and manages direct debit transactions using
      three main database tables. Note that merchant-specific financial
      configuration data (such as <code>merchantId</code>,
      <code>subAccountId</code>, <code>billerId</code>, and
      <code>PUBLIC_KEY</code>) is stored in a separate merchant table rather
      than the user table to properly segregate financial credentials from
      general user information.
    </p>
    <h3 class="code-line" data-line-start="12" data-line-end="13">
      <a id="Table_A_merchants_Stores_SCB_Configuration_12"></a>Table A:
      <code>merchants</code> (Stores SCB Configuration for Users)
    </h3>
    <p class="has-line-data" data-line-start="13" data-line-end="14">
      This table stores all SCB-specific financial configuration data for users
      who act as merchants (payment receivers).
    </p>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Column</th>
          <th style="text-align: left">Data Type</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Constraints / Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>id</code></strong>
          </td>
          <td style="text-align: left"><code>SERIAL</code></td>
          <td style="text-align: left">
            Unique identifier for each merchant record.
          </td>
          <td style="text-align: left"><strong>Primary Key</strong></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>user_id</code></td>
          <td style="text-align: left"><code>INT</code></td>
          <td style="text-align: left">
            Links to the user who owns this merchant configuration.
          </td>
          <td style="text-align: left">
            FK to <code>users(id)</code>, <code>UNIQUE</code>
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>merchant_id</code></td>
          <td style="text-align: left"><code>VARCHAR(50)</code></td>
          <td style="text-align: left">
            SCB-assigned merchant identifier for this user's account.
          </td>
          <td style="text-align: left">
            <code>NOT NULL</code>, <code>UNIQUE</code>
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>sub_account_id</code></td>
          <td style="text-align: left"><code>VARCHAR(50)</code></td>
          <td style="text-align: left">
            SCB sub-account identifier for payment processing.
          </td>
          <td style="text-align: left"><code>NOT NULL</code></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>biller_id</code></td>
          <td style="text-align: left"><code>VARCHAR(50)</code></td>
          <td style="text-align: left">
            SCB biller identifier for this merchant account.
          </td>
          <td style="text-align: left"><code>NOT NULL</code></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>public_key</code></td>
          <td style="text-align: left"><code>TEXT</code></td>
          <td style="text-align: left">
            SCB public key used for encrypting API requests to SCB.
          </td>
          <td style="text-align: left"><code>NOT NULL</code></td>
        </tr>

        <tr>
          <td style="text-align: left"><code>created_at</code></td>
          <td style="text-align: left">
            <code>TIMESTAMPTZ</code>
          </td>
          <td style="text-align: left">
            Date and time when merchant configuration was created.
          </td>
          <td style="text-align: left">
            <code>NOT NULL</code>, Default: <code>now()</code>
          </td>
        </tr>
      </tbody>
    </table>
    <h3 class="code-line" data-line-start="12" data-line-end="13">
      <a
        id="Table_A_scb_registrations_Tracks_Payers_SCB_Registration_Link_12"
      ></a
      >Table B: <code>scb_registrations</code> (Tracks Payer’s SCB Registration
      Link)
    </h3>
    <p class="has-line-data" data-line-start="13" data-line-end="14">
      This table stores the unique reference ID needed to fetch the customer’s
      bank details from SCB.
    </p>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Column</th>
          <th style="text-align: left">Data Type</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Constraints / Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>reg_ref</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left">
            <strong>Unique identifier created by the Financial Team</strong>
            that serves as the SCB <code>regRef</code> during customer
            registration.
          </td>
          <td style="text-align: left"><strong>Primary Key</strong></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>payer_user_id</code></td>
          <td style="text-align: left"><code>INT</code></td>
          <td style="text-align: left">
            The customer who will make payments (Payer).
          </td>
          <td style="text-align: left">FK to <code>users(id)</code></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>receiving_user_id</code></td>
          <td style="text-align: left"><code>INT</code></td>
          <td style="text-align: left">
            The merchant who will receive payments (Receiver).
          </td>
          <td style="text-align: left">FK to <code>users(id)</code></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>status</code></td>
          <td style="text-align: left"><code>VARCHAR(50)</code></td>
          <td style="text-align: left">
            Registration status (‘pending’, ‘success’, ‘failed’).
          </td>
          <td style="text-align: left">
            <code>NOT NULL</code>, Default: <code>'pending'</code>
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>created_at</code></td>
          <td style="text-align: left">
            <code>TIMESTAMPTZ</code>
          </td>
          <td style="text-align: left">
            Date and time when registration was started.
          </td>
          <td style="text-align: left">
            <code>NOT NULL</code>, Default: <code>now()</code>
          </td>
        </tr>
      </tbody>
    </table>
    <h3 class="code-line" data-line-start="23" data-line-end="24">
      <a id="Table_B_scb_debit_transactions_Tracks_Individual_Payments_23"></a
      >Table C: <code>scb_debit_transactions</code> (Tracks Individual Payments)
    </h3>
    <p class="has-line-data" data-line-start="24" data-line-end="25">
      This table tracks individual payment transactions, storing the unique ID
      (<code>ref_number</code>) for each debit request and its completion
      status.
    </p>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Column</th>
          <th style="text-align: left">Data Type</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Constraints / Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>ref_number</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left">
            <strong>Unique identifier created by the Financial Team</strong>
            that serves as the SCB <code>refNumber</code> for payment
            processing.
          </td>
          <td style="text-align: left"><strong>Primary Key</strong></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>reg_ref</code></td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left">
            Links to the completed registration record that enables this
            payment.
          </td>
          <td style="text-align: left">
            FK to <code>scb_registrations(reg_ref)</code>
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>ref_date_time</code></td>
          <td style="text-align: left">
            <code>TIMESTAMPTZ</code>
          </td>
          <td style="text-align: left">
            Date and time stamp sent to SCB as <code>refDateTime</code> for this
            transaction.
          </td>
          <td style="text-align: left"><code>NOT NULL</code></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>ref_time_date</code></td>
          <td style="text-align: left"><code>VARCHAR(14)</code></td>
          <td style="text-align: left">
            Transaction reference time and date returned by SCB
            (<code>refTimeDate</code>).
          </td>
          <td style="text-align: left">Indexed</td>
        </tr>
        <tr>
          <td style="text-align: left"><code>customer_ref</code></td>
          <td style="text-align: left"><code>VARCHAR(50)</code></td>
          <td style="text-align: left">
            Customer reference sent to SCB in format
            <code>"payerId:receiverId"</code>
            (<code>customerRef</code>).
          </td>
          <td style="text-align: left">Indexed</td>
        </tr>
        <tr>
          <td style="text-align: left"><code>amount</code></td>
          <td style="text-align: left"><code>NUMERIC(12,2)</code></td>
          <td style="text-align: left">
            Amount of money to be debited from the customer's account.
          </td>
          <td style="text-align: left"><code>NOT NULL</code></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>currency</code></td>
          <td style="text-align: left"><code>VARCHAR(3)</code></td>
          <td style="text-align: left">
            Currency code (e.g., USD, THB) for the transaction.
          </td>
          <td style="text-align: left"><code>NOT NULL</code></td>
        </tr>
        <tr>
          <td style="text-align: left"><code>scb_txn_number</code></td>
          <td style="text-align: left"><code>VARCHAR(255)</code></td>
          <td style="text-align: left">
            Transaction reference number provided by SCB after processing
            (<code>txnNumber</code>).
          </td>
          <td style="text-align: left">Indexed</td>
        </tr>
        <tr>
          <td style="text-align: left"><code>status</code></td>
          <td style="text-align: left"><code>VARCHAR(50)</code></td>
          <td style="text-align: left">
            Final payment status (‘confirmed’, ‘failed’, ‘refunded’).
          </td>
          <td style="text-align: left">
            <code>NOT NULL</code>, Default: <code>'pending'</code>
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>created_at</code></td>
          <td style="text-align: left">
            <code>TIMESTAMPTZ</code>
          </td>
          <td style="text-align: left">
            Date and time when the payment request was submitted.
          </td>
          <td style="text-align: left">
            <code>NOT NULL</code>, Default: <code>now()</code>
          </td>
        </tr>
      </tbody>
    </table>
    <hr />
    <h2 class="code-line" data-line-start="38" data-line-end="39">
      <a id="4_Financial_Team_Wrapper_APIs_38"></a>4. Financial Team Wrapper
      APIs for SCB Direct Debit
    </h2>
    <h3 class="code-line" data-line-start="40" data-line-end="41">
      <a id="41_Stage_0_Registration_Status_Check_40"></a>4.1 Stage 0:
      Registration Status Check
    </h3>
    <p class="has-line-data" data-line-start="42" data-line-end="43">
      This API lets development teams check whether a customer (Payer) has
      already registered with a specific merchant (Receiver) using their
      internal user IDs. This check is always the first step before processing
      any payment. If the user is not registered, you'll get a
      <code>regRef</code> and need to redirect them to link
      <code>registrationURL</code> from Stage 1 to complete registration, then
      poll until <code>isRegistered</code> becomes <code>true</code>.
    </p>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Action</th>
          <th style="text-align: left">Wrapper Endpoint</th>
          <th style="text-align: left">Method</th>
          <th style="text-align: left">Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left"><strong>Check Registration</strong></td>
          <td style="text-align: left">
            <code>/ourApi/v1/registration/status</code>
          </td>
          <td style="text-align: left">
            <span class="method-get">GET</span>
          </td>
          <td style="text-align: left">
            Checks the existence and status of a Payer’s registration link to
            determine the next step (init or pay).
          </td>
        </tr>
      </tbody>
    </table>

    <h4 class="code-line" data-line-start="48" data-line-end="49">
      <a id="Required_Input_Fields_Query_Parameters_48"></a>Required Input
      Fields (Query Parameters)
    </h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
          <th style="text-align: left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>payerUserId</code></strong>
          </td>
          <td style="text-align: left"><code>INT</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            System ID of the customer who will make payments.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>receivingUserId</code></strong>
          </td>
          <td style="text-align: left"><code>INT</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            System ID of the merchant who will receive payments.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 class="code-line" data-line-start="54" data-line-end="55">
      <a id="Return_Value_54"></a>Return Value
    </h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left"><code>isRegistered</code></td>
          <td style="text-align: left"><code>BOOLEAN</code></td>
          <td style="text-align: left">
            <code>true</code> if the customer has completed registration
            (statusCode <code>"0002"</code>) with this merchant and can be
            charged.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>regRef</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left">
            The unique identifier for this registration (only included when
            statusCode is <code>"1000"</code> - meaning init has been called for
            this user).
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>status</code></td>
          <td style="text-align: left"><code>VARCHAR</code></td>
          <td style="text-align: left">
            The status of the found registration (‘success’, ‘pending’,
            ‘failed’).
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>statusCode</code></td>
          <td style="text-align: left"><code>VARCHAR</code></td>
          <td style="text-align: left">
            If not <code>"1000"</code>, user has never called init (no
            <code>regRef</code> returned). If <code>"1000"</code>, it does not
            necessarily mean the user is registered.
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>statusDesc</code></td>
          <td style="text-align: left"><code>VARCHAR</code></td>
          <td style="text-align: left">
            This shows registration state like "Initiated", "Verified Success"
            or Error Messages.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 class="code-line" data-line-start="60" data-line-end="61">
      <a id="41b_Registration_Status_Check_by_RegRef_60"></a>4.1b Registration
      Status Check (by RegRef)
    </h3>
    <p class="has-line-data" data-line-start="61" data-line-end="62">
      Alternative version for polling registration status using
      <code>regRef</code> directly. Use this after calling the init API to
      monitor when user completes bank registration. Poll until
      <code>isRegistered</code> becomes <code>true</code>.
    </p>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Action</th>
          <th style="text-align: left">Wrapper Endpoint</th>
          <th style="text-align: left">Method</th>
          <th style="text-align: left">Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left"><strong>Check Registration</strong></td>
          <td style="text-align: left">
            <code>/ourApi/v1/registration/status/{regRef}</code>
          </td>
          <td style="text-align: left">
            <span class="method-get">GET</span>
          </td>
          <td style="text-align: left">
            Check registration status using <code>regRef</code> directly for
            polling.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 class="code-line" data-line-start="65" data-line-end="66">
      <a id="Required_Input_Fields_URL_Parameter_65"></a>Required Input Fields
      (URL Parameter)
    </h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
          <th style="text-align: left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>regRef</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            Registration reference ID obtained from <code>init API</code> or
            status check.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 class="code-line" data-line-start="71" data-line-end="72">
      <a id="Return_Value_RegRef_71"></a>Return Value
    </h4>
    <p class="has-line-data" data-line-start="72" data-line-end="73">
      Returns the same format as the main registration status endpoint above.
    </p>
    <h3 class="code-line" data-line-start="61" data-line-end="62">
      <a
        id="32_1st_Stage_Customer_Registration_Initialization_Web_Redirect_61"
      ></a
      >4.2 Stage 1: Customer Registration Initialization (Web Redirect)
    </h3>
    <p class="has-line-data" data-line-start="63" data-line-end="64">
      Use this API when the status check shows <code>isRegistered: false</code>.
      It starts the SCB web-based registration process for new customers. After
      redirecting the user to the <code>registrationUrl</code>, poll
      <code>/status/{regRef}</code> until <code>isRegistered</code> becomes true
      before charging.
    </p>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Action</th>
          <th style="text-align: left">Wrapper Endpoint</th>
          <th style="text-align: left">Method</th>
          <th style="text-align: left">SCB API Called</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left"><strong>Register Payer</strong></td>
          <td style="text-align: left">
            <code>/ourApi/v1/registration/init</code>
          </td>
          <td style="text-align: left">
            <span class="method-post">POST</span>
          </td>
          <td style="text-align: left">
            <code>/v1/registration/web/init</code>
          </td>
        </tr>
      </tbody>
    </table>
    <h4 class="code-line" data-line-start="67" data-line-end="68">
      <a id="Required_Input_Fields_67"></a>Required Input Fields
    </h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
          <th style="text-align: left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>customerUserId</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            The unique identifier for the customer requesting registration.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>merchantUserId</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            The unique identifier for the merchant processing the registration.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>backUrl</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            The return URL where the customer should be redirected after
            completing SCB registration.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 class="code-line" data-line-start="69" data-line-end="70">
      <a id="Wrapper_Logic_69"></a>Wrapper Logic
    </h4>
    <ol>
      <li class="has-line-data" data-line-start="70" data-line-end="71">
        The system creates a new
        <strong><code>reg_ref</code></strong> (registration reference) and saves
        a record in <code>scb_registrations</code> table with the customer and
        merchant userIDs.
      </li>
      <li class="has-line-data" data-line-start="71" data-line-end="72">
        The Financial Team system retrieves the Merchant’s SCB config
        (<code>merchantId</code>, <code>subAccountId</code>,
        <code>PUBLIC_KEY</code>) from the merchant table using the receiving
        user's ID.
      </li>
      <li class="has-line-data" data-line-start="72" data-line-end="75">
        The system contacts SCB's
        <strong><code>/v1/registration/web/init</code></strong> endpoint.
        <ul>
          <li class="has-line-data" data-line-start="73" data-line-end="75">
            <strong>Sent Data (Encrypted):</strong> <code>regRef</code> (the new
            reference ID), <code>ref1</code> (combined customer-merchant ID for
            uniqueness), <code>ref2</code> (merchant ID), and
            <code>backUrl</code> (return URL).
          </li>
        </ul>
      </li>
    </ol>
    <h4 class="code-line" data-line-start="75" data-line-end="76">
      <a id="Return_Value_75"></a>Return Value
    </h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>registrationUrl</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR</code></td>
          <td style="text-align: left">
            SCB web page URL where the customer should be sent to complete their
            bank registration.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>regRef</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left">
            The unique ID created in the Financial Team’s system.
            <strong>Required for the debit API.</strong>
          </td>
        </tr>
      </tbody>
    </table>
    <h3 class="code-line" data-line-start="81" data-line-end="82">
      <a id="43_2nd_Stage_Direct_Debit_Payment_81"></a>4.3 Stage 2: Direct Debit
      Payment
    </h3>
    <p class="has-line-data" data-line-start="83" data-line-end="84">
      Use this API <em>only after</em> confirming you have a valid
      <code>regRef</code> where <code>isRegistered</code> is <code>true</code>.
      This processes the complete payment transaction.
    </p>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Action</th>
          <th style="text-align: left">Wrapper Endpoint</th>
          <th style="text-align: left">Method</th>
          <th style="text-align: left">SCB Workflow Handled</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left"><strong>Debit Payment</strong></td>
          <td style="text-align: left">
            <code>/ourApi/v1/payment/debit</code>
          </td>
          <td style="text-align: left">
            <span class="method-post">POST</span>
          </td>
          <td style="text-align: left">
            Gets account info → Processes payment → Checks final status
          </td>
        </tr>
      </tbody>
    </table>
    <h4 class="code-line" data-line-start="89" data-line-end="90">
      <a id="Required_Input_Fields_89"></a>Required Input Fields
    </h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
          <th style="text-align: left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>regRef</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            <strong
              >Registration reference ID that links the customer to the
              merchant.</strong
            >
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>amount</code></td>
          <td style="text-align: left"><code>NUMERIC(12,2)</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            Amount of money to charge the customer.
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>currency</code></td>
          <td style="text-align: left"><code>VARCHAR(3)</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            Currency code using international standard (default is
            <code>"THB"</code> for Thai Baht).
          </td>
        </tr>
      </tbody>
    </table>
    <h4 class="code-line" data-line-start="96" data-line-end="97">
      <a id="Wrapper_Logic_96"></a>Wrapper Logic
    </h4>
    <ol>
      <li class="has-line-data" data-line-start="97" data-line-end="98">
        <strong>Internal System Lookup:</strong> The <code>regRef</code> is used
        to retrieve the stored <code>payerUserId</code>,
        <code>receivingUserId</code>, and the Merchant’s
        <code>PUBLIC_KEY</code> from the merchant table.
      </li>
      <li class="has-line-data" data-line-start="98" data-line-end="99">
        <strong>Transaction Setup:</strong> The system creates a unique payment
        ID (<code>ref_number</code>), records the transaction in
        <code>scb_debit_transactions</code>, and generates a
        <code>timestamp</code>.
      </li>
      <li class="has-line-data" data-line-start="99" data-line-end="100">
        <strong>A. Fetch Payer Details (Dynamic):</strong> Call SCB
        <strong><code>/v1/registration/inquiry</code></strong> using the
        <strong><code>regRef</code></strong
        >. The response is decrypted to retrieve the Payer’s
        <strong><code>accountNo</code></strong
        >. These values are <strong>NOT STORED IN THE DATABASE.</strong>
      </li>
      <li class="has-line-data" data-line-start="100" data-line-end="101">
        <strong>B. Process the Payment:</strong> The system tells SCB to charge
        the customer using <code>/v1/payment/direct/ddpay</code>, providing the
        account number and our transaction identifiers.
      </li>
      <li class="has-line-data" data-line-start="101" data-line-end="102">
        <strong>C. Confirm the Result:</strong> The system checks with SCB using
        <code>/v1/payment/inquiry</code> to verify the payment was completed
        successfully.
      </li>
      <li class="has-line-data" data-line-start="102" data-line-end="104">
        <strong>Record Keeping:</strong> The system updates our
        <code>scb_debit_transactions</code> table with the final payment status
        and SCB's transaction number.
      </li>
    </ol>
    <h4 class="code-line" data-line-start="104" data-line-end="105">
      <a id="Return_Value_104"></a>Return Value
    </h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left"><code>success</code></td>
          <td style="text-align: left"><code>BOOLEAN</code></td>
          <td style="text-align: left">
            <code>true</code> if the payment completed successfully.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>refNumber</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left">
            <strong
              >Our system's unique identifier for this payment
              transaction.</strong
            >
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>paymentRefId</code></td>
          <td style="text-align: left"><code>VARCHAR</code></td>
          <td style="text-align: left">
            SCB's unique transaction reference number.
          </td>
        </tr>
      </tbody>
    </table>
    <h3 class="code-line" data-line-start="111" data-line-end="112">
      <a id="44_Status_Inquiry_Endpoints_111"></a>4.4 Stage 3: Status Inquiry
      Endpoints
    </h3>
    <p class="has-line-data" data-line-start="83" data-line-end="84">
      Use this API to check the status of a payment at any time using the
      <code>refNumber</code> provided when the payment was initiated.
    </p>

    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Endpoint</th>
          <th style="text-align: left">Method</th>
          <th style="text-align: left">Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <code>/ourApi/v1/payment/status/{refNumber}</code>
          </td>
          <td style="text-align: left">
            <span class="method-get">GET</span>
          </td>
          <td style="text-align: left">
            Gets the current status and reference numbers for a specific
            payment.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 class="code-line" data-line-start="118" data-line-end="119">
      <a id="Required_Input_Fields_118"></a>Required Input Fields
    </h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
          <th style="text-align: left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>refNumber</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left"><strong>Yes</strong></td>
          <td style="text-align: left">
            Payment ID from the debit request (passed as URL parameter).
          </td>
        </tr>
      </tbody>
    </table>
    <h4 class="code-line" data-line-start="120" data-line-end="121">
      <a id="Return_Value_120"></a>Return Value
    </h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>refNumber</code></strong>
          </td>
          <td style="text-align: left"><code>VARCHAR(20)</code></td>
          <td style="text-align: left">
            The unique ID of the payment transaction.
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>status</code></td>
          <td style="text-align: left"><code>VARCHAR</code></td>
          <td style="text-align: left">
            The final status of the payment (‘confirmed’, ‘failed’, ‘pending’)
            from the database.
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>scbTxnNumber</code></td>
          <td style="text-align: left"><code>VARCHAR(255)</code></td>
          <td style="text-align: left">
            The transaction ID provided by SCB (<code>scb_txn_number</code>).
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>regNumber</code></td>
          <td style="text-align: left"><code>String</code></td>
          <td style="text-align: left">Merchant reference number.</td>
        </tr>
        <tr>
          <td style="text-align: left"><code>refDateTime</code></td>
          <td style="text-align: left"><code>String</code></td>
          <td style="text-align: left">
            Merchant reference date and time per transaction. Format:
            <code>yyyyMMddHHmmss</code>.
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>amount</code></td>
          <td style="text-align: left"><code>Number</code></td>
          <td style="text-align: left">Transaction amount. Ex: 100.00</td>
        </tr>
        <tr>
          <td style="text-align: left"><code>currency</code></td>
          <td style="text-align: left"><code>String</code></td>
          <td style="text-align: left">Transaction currency. Ex: THB</td>
        </tr>
        <tr>
          <td style="text-align: left"><code>customerRef</code></td>
          <td style="text-align: left"><code>String</code></td>
          <td style="text-align: left">Customer reference.</td>
        </tr>
        <tr>
          <td style="text-align: left"><code>statusCode</code></td>
          <td style="text-align: left"><code>String</code></td>
          <td style="text-align: left">
            Transaction status code (see link for payment status).
          </td>
        </tr>
        <tr>
          <td style="text-align: left"><code>statusDesc</code></td>
          <td style="text-align: left"><code>String</code></td>
          <td style="text-align: left">Transaction status description.</td>
        </tr>
      </tbody>
    </table>
    <hr />
    <h2 class="code-line" data-line-start="138" data-line-end="139">
      <a id="5_Variable_Glossary_and_Source_Mapping_138"></a>5. Variable
      Glossary and Source Mapping
    </h2>
    <p class="has-line-data" data-line-start="139" data-line-end="140">
      Complete reference of all variables used in the SCB Direct Debit system,
      their sources, and how they map between different APIs.
    </p>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th style="text-align: left">Variable</th>
          <th style="text-align: left">Used In</th>
          <th style="text-align: left">SCB API Field</th>
          <th style="text-align: left">Format</th>
          <th style="text-align: left">Source/Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">
            <strong><code>regRef</code></strong>
          </td>
          <td style="text-align: left">Registration/Payment APIs</td>
          <td style="text-align: left"><code>regRef</code></td>
          <td style="text-align: left"><code>[0-9a-f] hexadecimal</code></td>
          <td style="text-align: left">
            Generated by wrapper, stored in
            <code>scb_registrations</code> table. Links customer to merchant
            registration. <strong>IMPORTANT:</strong> Each
            <code>regRef</code> can only be used <strong>once</strong> for
            registration. If customer doesn't complete registration or you need
            a new registration URL, you must generate a completely new
            <code>regRef</code> by calling the init API again.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>accountNo</code></strong>
          </td>
          <td style="text-align: left">Registration inquiry response</td>
          <td style="text-align: left"><code>accountNo</code></td>
          <td style="text-align: left"><code>String(10)</code></td>
          <td style="text-align: left">
            Customer's bank account number. Retrieved from SCB, used
            temporarily, then discarded for security.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>customerRef</code></strong>
          </td>
          <td style="text-align: left">Registration/Payment APIs</td>
          <td style="text-align: left">
            <code>ref1</code> / <code>customerRef</code>
          </td>
          <td style="text-align: left">
            <code>[0-9a-f] hexadecimal and :</code>
          </td>
          <td style="text-align: left">
            Combined <code>customerId:merchantId</code> identifier. Created from
            <code>ref1</code>, stored in
            <code>scb_debit_transactions</code> with payment details.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>refNumber</code></strong>
          </td>
          <td style="text-align: left">Payment APIs</td>
          <td style="text-align: left"><code>refNumber</code></td>
          <td style="text-align: left"><code>[0-9a-f] hexadecimal</code></td>
          <td style="text-align: left">
            Unique payment transaction ID generated by wrapper, stored in
            <code>scb_debit_transactions</code> table.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>refDateTime</code></strong>
          </td>
          <td style="text-align: left">Payment APIs</td>
          <td style="text-align: left"><code>refDateTime</code></td>
          <td style="text-align: left"><code>yyyyMMddHHmmss</code></td>
          <td style="text-align: left">
            <code>timestamp</code> generated by wrapper for transaction, stored
            in <code>scb_debit_transactions</code> table.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>accountNumber</code></strong>
          </td>
          <td style="text-align: left">Payment charge API</td>
          <td style="text-align: left"><code>accountNumber</code></td>
          <td style="text-align: left"><code>String(10)</code></td>
          <td style="text-align: left">
            Customer's bank account number retrieved from registration inquiry
            (section 4.1), used for payment processing and discarded after.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>payerUserId</code></strong>
          </td>
          <td style="text-align: left">Wrapper APIs</td>
          <td style="text-align: left">N/A</td>
          <td style="text-align: left"><code>[A-Z0-9]</code></td>
          <td style="text-align: left">
            Internal system ID of the customer making payments. Input by other
            teams.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>receivingUserId</code></strong>
          </td>
          <td style="text-align: left">Wrapper APIs</td>
          <td style="text-align: left">N/A</td>
          <td style="text-align: left"><code>[A-Z0-9]</code></td>
          <td style="text-align: left">
            Internal system ID of the merchant receiving payments. Input by
            other teams.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>backUrl</code></strong>
          </td>
          <td style="text-align: left">Registration init API</td>
          <td style="text-align: left"><code>backUrl</code></td>
          <td style="text-align: left"><code>String(255)</code></td>
          <td style="text-align: left">
            Return URL where SCB redirects customer after completing bank
            registration. Input by other teams.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>registrationUrl</code></strong>
          </td>
          <td style="text-align: left">Registration init response</td>
          <td style="text-align: left"><code>registrationUrl</code></td>
          <td style="text-align: left"><code>String</code></td>
          <td style="text-align: left">
            SCB bank website URL where customer completes registration. Returned
            by wrapper init API.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>isRegistered</code></strong>
          </td>
          <td style="text-align: left">Status check APIs</td>
          <td style="text-align: left">N/A</td>
          <td style="text-align: left"><code>Boolean</code></td>
          <td style="text-align: left">
            Boolean flag indicating if customer has completed registration and
            can be charged. Determined by wrapper logic.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>statusCode</code></strong>
          </td>
          <td style="text-align: left">Status check APIs</td>
          <td style="text-align: left"><code>statusCode</code></td>
          <td style="text-align: left"><code>String(4)</code></td>
          <td style="text-align: left">
            SCB status codes (e.g., <code>"1000"</code>, <code>"0001"</code>,
            <code>"0002"</code>). Handled internally by wrapper to determine
            <code>isRegistered</code> value.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>statusDesc</code></strong>
          </td>
          <td style="text-align: left">Status check APIs</td>
          <td style="text-align: left"><code>statusDesc</code></td>
          <td style="text-align: left"><code>String</code></td>
          <td style="text-align: left">
            SCB status descriptions (e.g., "Initiated", "Verified Success").
            Handled internally by wrapper.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>ref1</code></strong>
          </td>
          <td style="text-align: left">SCB APIs</td>
          <td style="text-align: left"><code>ref1</code></td>
          <td style="text-align: left"><code>[A-Z0-9]</code></td>
          <td style="text-align: left">
            Reference field used by SCB APIs, typically contains customer
            identifier.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>ref2</code></strong>
          </td>
          <td style="text-align: left">SCB APIs</td>
          <td style="text-align: left"><code>ref2</code></td>
          <td style="text-align: left"><code>[A-Z0-9]</code></td>
          <td style="text-align: left">
            Secondary reference field used by SCB APIs for additional
            identification.
          </td>
        </tr>
        <tr>
          <td style="text-align: left">
            <strong><code>encryptedValue</code></strong>
          </td>
          <td style="text-align: left">SCB APIs</td>
          <td style="text-align: left"><code>encryptedValue</code></td>
          <td style="text-align: left"><code>String</code></td>
          <td style="text-align: left">
            Encrypted data payload sent to/from SCB APIs containing sensitive
            information.
          </td>
        </tr>
      </tbody>
    </table>
    <style>
      table {
        margin-bottom: 2rem;
      }
    </style>
  </body>
</html>
